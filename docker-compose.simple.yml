version: '3.8'

services:
  javinizer-js:
    image: alaricromeo/javinizer-js:latest
    container_name: javinizer-js
    restart: unless-stopped
    ports:
      - "4004:4004"
    volumes:
      # Persistent config and data
      - javinizer-config:/config
      - javinizer-data:/app/data
      # IMPORTANT: Replace this path with your JAV library location
      # Windows example: - D:\Jav\Library:/library:ro
      # Linux example:   - /mnt/Jav/Main:/library:ro
      # macOS example:  - /Volumes/Media/Jav:/library:ro
      - ${JAV_LIBRARY_PATH:-./sample-library}:/library:ro
    environment:
      - NODE_ENV=production
      - CONFIG_PATH=/config/config.json
      - LIBRARY_PATH=/library
      - TZ=${TZ:-Europe/Rome}
    shm_size: '2gb'
    deploy:
      resources:
        limits:
          memory: 2G
        reservations:
          memory: 512M

volumes:
  javinizer-config:
  javinizer-data:
