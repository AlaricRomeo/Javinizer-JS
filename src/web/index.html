<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Javinizer-js</title>
  <script src="i18n.js"></script>
  <script src="i18n-bindings.js"></script>
  <script defer src="app.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background-color: #f5f5f5;
      color: #333;
    }
    /* Barra di stato */
    .status-bar {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 12px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .status-bar h1 {
      font-size: 20px;
      font-weight: 600;
    }
    .status-bar .links {
      display: flex;
      gap: 20px;
    }
    .status-bar a {
      color: white;
      text-decoration: none;
      opacity: 0.9;
      transition: opacity 0.2s;
    }
    .status-bar a:hover {
      opacity: 1;
    }
    /* Container principale */
    .main-container {
      display: grid;
      grid-template-columns: 400px 1fr;
      gap: 20px;
      padding: 20px;
      max-width: 1600px;
      margin: 0 auto;
      height: calc(100vh - 48px);
    }
    /* Colonna sinistra */
    .left-column {
      display: flex;
      flex-direction: column;
      gap: 15px;
      overflow-y: auto;
    }
    .navigation-panel {
      background: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .nav-controls {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }
    .nav-controls button {
      flex: 0 0 40px;
      height: 40px;
      border-radius: 50%;
      border: none;
      background: #667eea;
      color: white;
      font-size: 18px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .nav-controls button:hover {
      background: #764ba2;
    }
    .nav-controls h2 {
      flex: 1;
      text-align: center;
      font-size: 18px;
      color: #667eea;
      font-weight: 600;
    }
    /* Fanart */
    .fanart-container {
      background: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .fanart-container h3 {
      font-size: 14px;
      color: #667eea;
      margin-bottom: 10px;
      font-weight: 600;
    }
    .fanart-image {
      width: 100%;
      height: 220px;
      background: #e0e0e0;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #999;
      font-size: 14px;
      overflow: hidden;
    }
    .fanart-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    /* Config panel */
    .config-panel {
      background: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .config-panel h3 {
      font-size: 14px;
      color: #667eea;
      margin-bottom: 10px;
      font-weight: 600;
    }
    .config-panel .path-selector {
      display: flex;
      gap: 8px;
    }
    .config-panel .path-selector input {
      flex: 1;
      font-size: 12px;
    }
    .config-panel .path-selector button {
      flex: 0 0 auto;
      padding: 8px 12px;
      font-size: 12px;
    }
    .config-panel small {
      display: block;
      color: #666;
      font-size: 11px;
      margin-top: 5px;
    }
    /* Scraper placeholder */
    .scraper-panel {
      background: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      min-height: 150px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #999;
      font-style: italic;
    }
    /* Colonna destra */
    .right-column {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      overflow-y: auto;
    }
    .form-section {
      margin-bottom: 25px;
    }
    .form-section h3 {
      font-size: 16px;
      color: #667eea;
      margin-bottom: 15px;
      padding-bottom: 8px;
      border-bottom: 2px solid #f0f0f0;
      font-weight: 600;
    }
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-bottom: 15px;
    }
    .form-row.single {
      grid-template-columns: 1fr;
    }
    .form-group {
      display: flex;
      flex-direction: column;
    }
    label {
      font-size: 12px;
      font-weight: 600;
      color: #555;
      margin-bottom: 5px;
    }
    input, textarea {
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-family: inherit;
      font-size: 14px;
      transition: border-color 0.2s;
    }
    input:focus, textarea:focus {
      outline: none;
      border-color: #667eea;
    }
    input:disabled, input:read-only {
      background-color: #f5f5f5;
      color: #999;
    }
    /* Campo modificato (dirty) */
    input.dirty, textarea.dirty {
      border-left: 4px solid #ff9800;
      background-color: #fff3e0;
    }
    textarea {
      resize: vertical;
      min-height: 80px;
    }
    button {
      padding: 10px 16px;
      background-color: #667eea;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: background 0.2s;
    }
    button:hover {
      background-color: #764ba2;
    }
    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }
    /* Actors grid */
    .actors-section {
      margin-top: 25px;
    }
    .actors-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 15px;
      margin-top: 15px;
    }
    .actor-card {
      background: #f9f9f9;
      border-radius: 8px;
      padding: 10px;
      text-align: center;
      position: relative;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .actor-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .actor-card .thumbnail {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: #e0e0e0;
      margin: 0 auto 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }
    .actor-card .thumbnail img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .actor-card .name {
      font-size: 12px;
      font-weight: 600;
      color: #333;
      margin-bottom: 2px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .actor-card .role {
      font-size: 10px;
      color: #999;
    }
    .add-actor-btn {
      background: #28a745;
      width: 100%;
      padding: 12px;
      margin-top: 10px;
    }
    .add-actor-btn:hover {
      background: #218838;
    }
    /* Save button */
    .save-panel {
      position: sticky;
      bottom: 0;
      background: white;
      padding: 15px 0;
      border-top: 2px solid #f0f0f0;
      margin-top: 20px;
    }
    #saveItem {
      width: 100%;
      padding: 14px;
      background: #28a745;
      font-size: 16px;
      font-weight: 600;
      position: relative;
      transition: all 0.3s;
    }
    #saveItem:hover {
      background: #218838;
    }
    #saveItem:disabled {
      background: #ccc;
      cursor: not-allowed;
      opacity: 0.6;
    }
    #saveItem.has-changes {
      background: #ff9800;
      animation: pulse 2s infinite;
    }
    #saveItem.has-changes:hover {
      background: #f57c00;
    }
    .changes-badge {
      position: absolute;
      top: -8px;
      right: -8px;
      background: #dc3545;
      color: white;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(255, 152, 0, 0.7); }
      50% { box-shadow: 0 0 0 10px rgba(255, 152, 0, 0); }
    }
    .actor-item {
      border: 1px solid #ddd;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 4px;
      background-color: #f9f9f9;
      position: relative;
    }
    .actor-item .remove-actor {
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: #dc3545;
      padding: 5px 10px;
      font-size: 12px;
    }
    .actor-item .remove-actor:hover {
      background-color: #c82333;
    }
    #addActor {
      background-color: #17a2b8;
      margin-top: 10px;
    }
    #addActor:hover {
      background-color: #138496;
    }
    #dirBrowserList div {
      transition: background-color 0.2s;
    }
    #dirBrowserList div:hover {
      background-color: #e9ecef !important;
    }
    #dirBrowserUp:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    @keyframes slideOut {
      from {
        transform: translateX(0);
        opacity: 1;
      }
      to {
        transform: translateX(400px);
        opacity: 0;
      }
    }
  </style>
</head>
<body>

<!-- Status Bar -->
<div class="status-bar">
  <h1 data-i18n="app.title">Javinizer-js</h1>
  <div class="links">
    <select id="languageSelector" style="background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); border-radius: 4px; padding: 5px 10px; cursor: pointer; font-size: 14px; margin-right: 15px;">
      <option value="en">English</option>
      <option value="it">Italiano</option>
    </select>
    <a href="#" data-i18n="nav.config">Config</a>
    <a href="#" data-i18n="nav.about">About</a>
  </div>
</div>

<!-- Main Container -->
<div class="main-container">

  <!-- Left Column -->
  <div class="left-column">

    <!-- Navigation Panel -->
    <div class="navigation-panel">
      <div class="nav-controls">
        <button id="prev">‚Üê</button>
        <h2 id="current-id">---</h2>
        <button id="next">‚Üí</button>
      </div>
    </div>

    <!-- Fanart Container -->
    <div class="fanart-container">
      <h3>Fanart</h3>
      <div class="fanart-image">
        <img id="fanartImage" src="" alt="Fanart" style="display: none;">
        <span id="fanartPlaceholder">Nessuna immagine</span>
      </div>
    </div>

    <!-- Config Panel -->
    <div class="config-panel">
      <h3>Library Path</h3>
      <div class="path-selector">
        <input id="libraryPath" type="text" readonly>
        <button id="browseLibrary" type="button">üìÅ</button>
      </div>
      <small>Clicca sul pulsante per selezionare la cartella della libreria</small>
    </div>

    <!-- Scraper Panel Placeholder -->
    <div class="scraper-panel">
      Scraper Panel (coming soon)
    </div>

  </div>

  <!-- Right Column -->
  <div class="right-column">

    <!-- Basic Info Section -->
    <div class="form-section">
      <h3>Informazioni di Base</h3>

      <div class="form-row">
        <div class="form-group">
          <label>ID</label>
          <input id="id" disabled>
        </div>
        <div class="form-group">
          <label>Display Name</label>
          <input id="displayName" disabled>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Title</label>
          <input id="title">
        </div>
        <div class="form-group">
          <label>Alternate Title</label>
          <input id="alternateTitle">
        </div>
      </div>

      <div class="form-row single">
        <div class="form-group">
          <label>Description</label>
          <input id="description">
        </div>
      </div>
    </div>

    <!-- Production Section -->
    <div class="form-section">
      <h3>Produzione</h3>

      <div class="form-row">
        <div class="form-group">
          <label>Director</label>
          <input id="director">
        </div>
        <div class="form-group">
          <label>Release Date</label>
          <input id="releaseDate" type="date">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Runtime (minuti)</label>
          <input id="runtime" type="number">
        </div>
        <div class="form-group">
          <label>Series</label>
          <input id="series">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Maker</label>
          <input id="maker">
        </div>
        <div class="form-group">
          <label>Label</label>
          <input id="label">
        </div>
      </div>
    </div>

    <!-- Rating Section -->
    <div class="form-section">
      <h3>Rating e Classificazione</h3>

      <div class="form-row">
        <div class="form-group">
          <label>Rating</label>
          <input id="rating" type="number" step="0.1" min="0" max="10">
        </div>
        <div class="form-group">
          <label>Content Rating</label>
          <input id="contentRating">
        </div>
      </div>
    </div>

    <!-- Categories Section -->
    <div class="form-section">
      <h3>Categorie</h3>

      <div class="form-row">
        <div class="form-group">
          <label>Genres (separati da virgola)</label>
          <input id="genres">
        </div>
        <div class="form-group">
          <label>Tags (separati da virgola)</label>
          <input id="tags">
        </div>
      </div>
    </div>

    <!-- Media URLs Section -->
    <div class="form-section">
      <h3>Media URLs</h3>

      <div class="form-row single">
        <div class="form-group">
          <label>Cover URL</label>
          <input id="coverUrl" type="url">
        </div>
      </div>

      <div class="form-row single">
        <div class="form-group">
          <label>Screenshot URL</label>
          <input id="screenshotUrl" type="url">
        </div>
      </div>

      <div class="form-row single">
        <div class="form-group">
          <label>Trailer URL</label>
          <input id="trailerUrl" type="url">
        </div>
      </div>
    </div>

    <!-- Actors Section -->
    <div class="actors-section">
      <h3>Attori</h3>
      <div class="actors-grid" id="actors-grid">
        <!-- Actor cards will be inserted here by JS -->
      </div>
      <button class="add-actor-btn" id="addActor" type="button">+ Aggiungi Attore</button>
    </div>

    <!-- Save Panel -->
    <div class="save-panel">
      <button id="saveItem">
        <span id="saveItemText">üíæ Salva Modifiche</span>
        <span id="changesBadge" class="changes-badge" style="display: none;">0</span>
      </button>
    </div>

  </div>

</div>

<!-- Actor Edit Modal -->
<div id="actorEditModal" style="display: none;">
  <div id="actorEditOverlay" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000; display: flex; align-items: center; justify-content: center;">
    <div id="actorEditContent" style="background: white; padding: 25px; border-radius: 8px; max-width: 500px; width: 90%; display: flex; flex-direction: column;">
      <h2 style="margin-top: 0; margin-bottom: 20px; color: #667eea; font-size: 20px;">Edit Actor</h2>

      <div style="margin-bottom: 15px;">
        <label style="display: block; font-size: 12px; font-weight: 600; color: #555; margin-bottom: 5px;">Nome</label>
        <input id="actorEditName" type="text" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;" placeholder="Nome dell'attore">
      </div>

      <div style="margin-bottom: 15px;">
        <label style="display: block; font-size: 12px; font-weight: 600; color: #555; margin-bottom: 5px;">Nome Alternativo (giapponese, ecc.)</label>
        <input id="actorEditAltName" type="text" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;" placeholder="Nome alternativo">
      </div>

      <div style="margin-bottom: 15px;">
        <label style="display: block; font-size: 12px; font-weight: 600; color: #555; margin-bottom: 5px;">Ruolo</label>
        <input id="actorEditRole" type="text" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;" placeholder="Actress" value="Actress">
      </div>

      <div style="margin-bottom: 20px;">
        <label style="display: block; font-size: 12px; font-weight: 600; color: #555; margin-bottom: 5px;">Thumb URL</label>
        <input id="actorEditThumb" type="url" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;" placeholder="https://...">
      </div>

      <!-- Preview thumbnail -->
      <div id="actorEditPreview" style="margin-bottom: 20px; text-align: center; display: none;">
        <label style="display: block; font-size: 12px; font-weight: 600; color: #555; margin-bottom: 10px;">Preview</label>
        <div style="width: 100px; height: 100px; border-radius: 50%; overflow: hidden; margin: 0 auto; background: #e0e0e0; display: flex; align-items: center; justify-content: center;">
          <img id="actorEditPreviewImg" src="" alt="Preview" style="width: 100%; height: 100%; object-fit: cover; display: none;">
          <span id="actorEditPreviewPlaceholder" style="font-size: 40px;">üë§</span>
        </div>
      </div>

      <div style="margin-top: 10px; font-size: 11px; color: #999; padding: 10px; background: #f9f9f9; border-radius: 4px; margin-bottom: 20px;">
        <strong>Nota:</strong> "Select Existing" sar√† implementato in futuro per selezionare attori gi√† presenti nel database.
      </div>

      <div style="display: flex; gap: 10px; justify-content: flex-end;">
        <button id="actorEditCancel" type="button" style="background-color: #6c757d; padding: 10px 20px;">Annulla</button>
        <button id="actorEditRemove" type="button" style="background-color: #dc3545; padding: 10px 20px; display: none;">Rimuovi</button>
        <button id="actorEditSave" type="button" style="background-color: #667eea; padding: 10px 20px;">Salva</button>
      </div>
    </div>
  </div>
</div>

<!-- Directory Browser Modal -->
<div id="dirBrowserModal" style="display: none;">
  <div id="dirBrowserOverlay" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000; display: flex; align-items: center; justify-content: center;">
    <div id="dirBrowserContent" style="background: white; padding: 20px; border-radius: 8px; max-width: 600px; width: 90%; max-height: 80vh; display: flex; flex-direction: column;">
      <h3 style="margin-top: 0;">Seleziona Directory</h3>
      <div style="display: flex; gap: 10px; margin-bottom: 15px; align-items: center;">
        <button id="dirBrowserUp" type="button">‚¨Ü Su</button>
        <input id="dirBrowserPath" type="text" readonly style="flex: 1; background: #f0f0f0;">
      </div>
      <div id="dirBrowserList" style="flex: 1; overflow-y: auto; border: 1px solid #ddd; padding: 10px; border-radius: 4px; margin-bottom: 15px;">
        <!-- Lista directory -->
      </div>
      <div style="display: flex; gap: 10px; justify-content: flex-end;">
        <button id="dirBrowserCancel" type="button" style="background-color: #6c757d;">Annulla</button>
        <button id="dirBrowserSelect" type="button" style="background-color: #28a745;">Seleziona questa cartella</button>
      </div>
    </div>
  </div>
</div>

</body>
</html>
