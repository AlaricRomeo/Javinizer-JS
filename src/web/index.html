<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Javinizer-js</title>
  <link rel="stylesheet" href="navbar.css">
  <link rel="stylesheet" href="styles.css">
  <script src="i18n.js"></script>
  <script src="navbar-loader.js"></script>
  <script src="i18n-bindings.js"></script>
  <script defer src="app.js"></script>
</head>
<body>

<!-- Navbar will be loaded here by navbar-loader.js -->

<!-- Main Container -->
<div class="main-container">

  <!-- Left Column -->
  <div class="left-column">

    <!-- Navigation Panel -->
    <div class="navigation-panel">
      <div class="nav-controls">
        <button id="prev"><img src="images/caret-left-square-fill.svg" alt="Previous"></button>
        <h2 id="current-id">---</h2>
        <button id="next"><img src="images/caret-right-square-fill.svg" alt="Next"></button>
      </div>
    </div>

    <!-- Fanart Container -->
    <div class="fanart-container">
      <h3>Fanart</h3>
      <div class="fanart-image">
        <img id="fanartImage" src="" alt="Fanart" style="display: none;">
        <span id="fanartPlaceholder">Nessuna immagine</span>
      </div>
    </div>

    <!-- Config Panel -->
    <div class="config-panel">
      <h3>Library Path</h3>
      <div class="path-selector">
        <input id="libraryPath" type="text" readonly>
        <button id="browseLibrary" type="button">üìÅ</button>
      </div>
      <small>Clicca sul pulsante per selezionare la cartella della libreria</small>
      <p id="libraryStatus" style="margin-top: 10px; font-size: 12px; color: #666;">Caricamento...</p>

      <!-- Mode Toggle -->
      <h3 style="margin-top: 20px;">Mode</h3>
      <div class="mode-toggle">
        <button id="modeEdit" class="mode-btn">EDIT</button>
        <button id="modeScrape" class="mode-btn active">SCRAPE</button>
      </div>
    </div>

    <!-- Scraper Panel -->
    <div class="scraper-panel">
      <h3>Scrape Panel</h3>
      <p id="scrapeStatus" style="margin-top: 10px; font-size: 12px; color: #666;">No items available</p>
      <button id="scrapeNow" class="scrape-now-btn" style="margin-top: 10px; width: 100%;">üîç Scrape Now!</button>
      <button id="clearCache" class="clear-cache-btn" style="margin-top: 10px; width: 100%; background: #6c757d;">üóëÔ∏è Clear Scrapers Cache</button>
      <div class="delete-buttons-row">
        <button id="deleteItem" class="delete-item-btn">üóëÔ∏è Delete Item</button>
        <button id="deleteAllItems" class="delete-all-items-btn">üóëÔ∏è Delete All Items</button>
      </div>
    </div>

  </div>

  <!-- Right Column -->
  <div class="right-column">

    <!-- Basic Info Section -->
    <div class="form-section">
      <h3>Informazioni di Base</h3>

      <div class="form-row">
        <div class="form-group">
          <label>ID</label>
          <input id="id">
        </div>
        <div class="form-group">
          <label>Content ID</label>
          <input id="contentId">
        </div>
      </div>

      <div class="form-row single">
        <div class="form-group">
          <label>Title</label>
          <input id="title">
        </div>
      </div>

      <div class="form-row single">
        <div class="form-group">
          <label>Alternate Title</label>
          <input id="alternateTitle">
        </div>
      </div>

      <div class="form-row single">
        <div class="form-group">
          <label>Description</label>
          <input id="description">
        </div>
      </div>
    </div>

    <!-- Production Section -->
    <div class="form-section">
      <h3>Produzione</h3>

      <div class="form-row">
        <div class="form-group">
          <label>Director</label>
          <input id="director">
        </div>
        <div class="form-group">
          <label>Release Date</label>
          <input id="releaseDate" type="date">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Runtime (minuti)</label>
          <input id="runtime" type="number">
        </div>
        <div class="form-group">
          <label>Series</label>
          <input id="series">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Maker</label>
          <input id="maker">
        </div>
        <div class="form-group">
          <label>Label</label>
          <input id="label">
        </div>
      </div>
    </div>

    <!-- Rating Section -->
    <div class="form-section">
      <h3>Rating e Classificazione</h3>

      <div class="form-row">
        <div class="form-group">
          <label>Rating</label>
          <input id="rating" type="number" step="0.1" min="0" max="10">
        </div>
        <div class="form-group">
          <label>Content Rating</label>
          <input id="contentRating">
        </div>
      </div>
    </div>

    <!-- Categories Section -->
    <div class="form-section">
      <h3>Categorie</h3>

      <div class="form-row">
        <div class="form-group">
          <label>Genres (separati da virgola)</label>
          <input id="genres">
        </div>
        <div class="form-group">
          <label>Tags (separati da virgola)</label>
          <input id="tags">
        </div>
      </div>
    </div>

    <!-- Media URLs Section -->
    <div class="form-section">
      <h3>Media URLs</h3>

      <div class="form-row single">
        <div class="form-group">
          <label>Cover URL</label>
          <input id="coverUrl" type="url">
        </div>
      </div>

      <div class="form-row single">
        <div class="form-group">
          <label>Screenshot URL</label>
          <input id="screenshotUrl" type="url">
        </div>
      </div>

      <div class="form-row single">
        <div class="form-group">
          <label>Trailer URL</label>
          <input id="trailerUrl" type="url">
        </div>
      </div>
    </div>

    <!-- Actors Section -->
    <div class="actors-section">
      <h3>Attori</h3>
      <div class="actors-grid" id="actors-grid">
        <!-- Actor cards will be inserted here by JS -->
      </div>
      <button class="add-actor-btn" id="addActor" type="button">+ Aggiungi Attore</button>
    </div>

    <!-- Save Panel -->
    <div class="save-panel">
      <button id="saveItem">
        <span id="saveItemText">üíæ Salva Modifiche</span>
        <span id="changesBadge" class="changes-badge" style="display: none;">0</span>
      </button>
    </div>

  </div>

</div>

<!-- Actor Edit Modal -->
<div id="actorEditModal" style="display: none;">
  <div id="actorEditOverlay" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000; display: flex; align-items: center; justify-content: center;">
    <div id="actorEditContent" style="background: white; padding: 25px; border-radius: 8px; max-width: 500px; width: 90%; display: flex; flex-direction: column;">
      <h2 style="margin-top: 0; margin-bottom: 20px; color: #667eea; font-size: 20px;">Edit Actor</h2>

      <div style="margin-bottom: 15px;">
        <label style="display: block; font-size: 12px; font-weight: 600; color: #555; margin-bottom: 5px;">Nome</label>
        <input id="actorEditName" type="text" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;" placeholder="Nome dell'attore">
      </div>

      <div style="margin-bottom: 15px;">
        <label style="display: block; font-size: 12px; font-weight: 600; color: #555; margin-bottom: 5px;">Nome Alternativo (giapponese, ecc.)</label>
        <input id="actorEditAltName" type="text" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;" placeholder="Nome alternativo">
      </div>

      <div style="margin-bottom: 15px;">
        <label style="display: block; font-size: 12px; font-weight: 600; color: #555; margin-bottom: 5px;">Ruolo</label>
        <input id="actorEditRole" type="text" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;" placeholder="Actress" value="Actress">
      </div>

      <div style="margin-bottom: 20px;">
        <label style="display: block; font-size: 12px; font-weight: 600; color: #555; margin-bottom: 5px;">Thumb URL</label>
        <input id="actorEditThumb" type="url" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;" placeholder="https://...">
      </div>

      <!-- Preview thumbnail -->
      <div id="actorEditPreview" style="margin-bottom: 20px; text-align: center; display: none;">
        <label style="display: block; font-size: 12px; font-weight: 600; color: #555; margin-bottom: 10px;">Preview</label>
        <div style="width: 100px; height: 100px; border-radius: 50%; overflow: hidden; margin: 0 auto; background: #e0e0e0; display: flex; align-items: center; justify-content: center;">
          <img id="actorEditPreviewImg" src="" alt="Preview" style="width: 100%; height: 100%; object-fit: cover; display: none;">
          <span id="actorEditPreviewPlaceholder" style="font-size: 40px;">üë§</span>
        </div>
      </div>

      <!-- Additional Actor Info -->
      <div style="margin-bottom: 15px;">
        <label style="display: block; font-size: 12px; font-weight: 600; color: #555; margin-bottom: 5px;">Data di Nascita</label>
        <input id="actorEditBirthdate" type="date" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;">
      </div>

      <div style="margin-bottom: 15px;">
        <label style="display: block; font-size: 12px; font-weight: 600; color: #555; margin-bottom: 5px;">Altezza (cm)</label>
        <input id="actorEditHeight" type="number" min="0" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;" placeholder="">
      </div>

      <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 15px;">
        <div>
          <label style="display: block; font-size: 12px; font-weight: 600; color: #555; margin-bottom: 5px;">Seno (cm)</label>
          <input id="actorEditBust" type="number" min="0" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;" placeholder="">
        </div>
        <div>
          <label style="display: block; font-size: 12px; font-weight: 600; color: #555; margin-bottom: 5px;">Vita (cm)</label>
          <input id="actorEditWaist" type="number" min="0" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;" placeholder="">
        </div>
        <div>
          <label style="display: block; font-size: 12px; font-weight: 600; color: #555; margin-bottom: 5px;">Fianchi (cm)</label>
          <input id="actorEditHips" type="number" min="0" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;" placeholder="">
        </div>
      </div>

      <!-- Data source info (read-only) -->
      <div id="actorEditSourceInfo" style="margin-bottom: 15px; padding: 10px; background: #f0f7ff; border-left: 3px solid #667eea; border-radius: 4px; font-size: 12px; display: none;">
        <strong>Fonte dati:</strong> <span id="actorEditSource"></span>
      </div>

      <!-- Search Actor Button -->
      <div style="margin-bottom: 20px;">
        <button id="actorEditSearch" type="button" style="width: 100%; background-color: #28a745; color: white; padding: 12px 20px; border: none; border-radius: 4px; font-size: 14px; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;">
          <span>üîç</span>
          <span id="actorEditSearchText">Cerca Attore</span>
        </button>
        <div id="actorEditSearchStatus" style="margin-top: 8px; font-size: 12px; color: #666; display: none; text-align: center;"></div>
      </div>

      <div style="display: flex; gap: 10px; justify-content: flex-end;">
        <button id="actorEditCancel" type="button" style="background-color: #6c757d; padding: 10px 20px;">Annulla</button>
        <button id="actorEditRemove" type="button" style="background-color: #dc3545; padding: 10px 20px; display: none;">Rimuovi</button>
        <button id="actorEditSave" type="button" style="background-color: #667eea; padding: 10px 20px;">Salva</button>
      </div>
    </div>
  </div>
</div>

<!-- Directory Browser Modal -->
<div id="dirBrowserModal" style="display: none;">
  <div id="dirBrowserOverlay" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000; display: flex; align-items: center; justify-content: center;">
    <div id="dirBrowserContent" style="background: white; padding: 20px; border-radius: 8px; max-width: 600px; width: 90%; max-height: 80vh; display: flex; flex-direction: column;">
      <h3 style="margin-top: 0;">Seleziona Directory</h3>
      <div style="display: flex; gap: 10px; margin-bottom: 15px; align-items: center;">
        <button id="dirBrowserUp" type="button">‚¨Ü Su</button>
        <input id="dirBrowserPath" type="text" readonly style="flex: 1; background: #f0f0f0;">
      </div>
      <div id="dirBrowserList" style="flex: 1; overflow-y: auto; border: 1px solid #ddd; padding: 10px; border-radius: 4px; margin-bottom: 15px;">
        <!-- Lista directory -->
      </div>
      <div style="display: flex; gap: 10px; justify-content: flex-end;">
        <button id="dirBrowserCancel" type="button" style="background-color: #6c757d;">Annulla</button>
        <button id="dirBrowserSelect" type="button" style="background-color: #28a745;">Seleziona questa cartella</button>
      </div>
    </div>
  </div>
</div>

<!-- Scraping Progress Modal -->
<div id="scrapingModal" style="display: none;">
  <div style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); z-index: 2000; display: flex; align-items: center; justify-content: center;">
    <div style="background: white; padding: 30px; border-radius: 12px; max-width: 600px; width: 90%; max-height: 80vh; display: flex; flex-direction: column;">
      <h2 style="margin-top: 0; margin-bottom: 20px; color: #667eea; font-size: 24px;">
        üîç Scraping in Progress
      </h2>

      <div id="scrapingProgress" style="flex: 1; overflow-y: auto; background: #f5f5f5; padding: 15px; border-radius: 8px; font-family: monospace; font-size: 12px; line-height: 1.6; margin-bottom: 20px; max-height: 400px;">
        <div style="color: #666;">Initializing...</div>
      </div>

      <div style="display: flex; gap: 10px; justify-content: flex-end;">
        <button id="scrapingClose" type="button" style="background-color: #6c757d; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-size: 14px; display: none;">
          Close
        </button>
      </div>
    </div>
  </div>
</div>

</body>
</html>
